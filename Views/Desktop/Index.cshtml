
@{
    ViewBag.Title = "דוגמה לדסקטופ - מודול חשבוניות לישראל";
}

<h1>Demo for a desktop application</h1>


<h2>Option 1 - Use Caspit. No change to your application</h2>
<p>
    Use Caspit's Allocation Number page <a href="https://app.caspit.biz/OpenApi" target="_blank">here</a>.<br />
    Then instruct the user to copy the Allocation Number into a Remarks/Details field in your application.
</p>

<p>
    You can populate the page via this API call:<br />
                                                <a href="https://app.caspit.biz/OpenApi/GetAllocationNumber?source=CaspitAccess&Invoice_ID=70&Invoice_Reference_Number=10043&Vat_Number=111111118&Invoice_Date=2023-10-15&Customer_Name=%D7%90%D7%9C%D7%99%D7%94%D7%95%20%D7%94%D7%9B%D7%94%D7%9F&Customer_VAT_Number=211111117&Amount_Before_Discount=4567&Discount=0.33&Payment_Amount=4566.67&VAT_Amount=776.333&Payment_Amount_Including_VAT=5343&Accounting_Software_Number=162405&Invoice_Type=305" target="_blank">
                                                    https://app.caspit.biz/OpenApi/GetAllocationNumber?source=CaspitAccess&Invoice_ID=70&Invoice_Reference_Number=10043&Vat_Number=111111118&Invoice_Date=2023-10-15&Customer_Name=%D7%90%D7%9C%D7%99%D7%94%D7%95%20%D7%94%D7%9B%D7%94%D7%9F&Customer_VAT_Number=211111117&Amount_Before_Discount=4567&Discount=0.33&Payment_Amount=4566.67&VAT_Amount=776.33&Payment_Amount_Including_VAT=5343&Accounting_Software_Number=162405&Invoice_Type=305
                                                </a>
</p>

<hr />

<h2>Option 2 - Implementing some API calls in your application</h2>
<p style="line-height: 2em;">
    The idea is this:<br />
    (1)	The user gets the Authorization Code via a browser using this page.<br />
    (2)	The user copies the Auth Code into the desktop application.<br />
    (3)	The application performs the API calls to get the Token.<br />
    This means that you need to add the ability to perform Http communication into the application and parse the response.<br />
    If this is not feasible then the whole process will have to be implemented outside of the desktop application.<br />
    (4)	The application stores the Token and the Refresh Token.<br />
    (5)	The application uses the Token to get an Allocation Number.<br />
    (6)	The application uses the Refresh Token to get a new Token and new Refresh Token. Goto step 4.<br />
    (7)	Once the Refresh Token expires display a relevant message to the user and goto step 1.<br />
</p>

<p>
    <a href="https://openapi.taxes.gov.il/shaam/tsandbox/longtimetoken/oauth2/authorize?response_type=code&client_id=931d2ca419fa8a41edeab5b2f361645f&scope=scope">Click here to get the Authorization Code</a>
</p>

<p>
    Once you have the Authorization Code copy it to My Desktop Application and close the browser.<br />
</p>





